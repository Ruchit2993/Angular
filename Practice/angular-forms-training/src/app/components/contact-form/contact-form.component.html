<div class="form-container">
  <h2>üìß Contact Form</h2>
  <p class="subtitle">Advanced validation with phone, URL, and textarea patterns</p>

  <!-- Success Message -->
  <div class="success-message" *ngIf="submitted && submittedData">
    Thank you, {{ submittedData.name }}! Your message has been sent successfully.
  </div>

  <!-- Info Box -->
  <div class="info-box">
    <h3>üìñ Learning Points:</h3>
    <ul>
      <li><strong>Phone pattern validation</strong> - US phone number format (XXX-XXX-XXXX)</li>
      <li><strong>URL pattern validation</strong> - Valid website URL format</li>
      <li><strong>Textarea with character limit</strong> - Maximum length constraint</li>
      <li><strong>Dynamic character counter</strong> - Real-time remaining characters display</li>
      <li><strong>Select dropdown validation</strong> - Required selection from options</li>
      <li><strong>Radio button groups</strong> - Priority selection</li>
    </ul>
  </div>

  <form #contactForm="ngForm" (ngSubmit)="onSubmit(contactForm)">
    
    <!-- Name Field -->
    <div class="form-group">
      <label for="name">Full Name *</label>
      <input
        type="text"
        id="name"
        name="name"
        [(ngModel)]="contact.name"
        #name="ngModel"
        required
        minlength="2"
        maxlength="50"
        placeholder="Enter your full name"
      >
      
      <div class="error-message" *ngIf="name.invalid && name.touched">
        <span *ngIf="name.errors?.['required']">Name is required</span>
        <span *ngIf="name.errors?.['minlength']">
          Name must be at least 2 characters long
        </span>
        <span *ngIf="name.errors?.['maxlength']">
          Name cannot exceed 50 characters
        </span>
      </div>
    </div>

    <!-- Email Field -->
    <div class="form-group">
      <label for="email">Email Address *</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="contact.email"
        #email="ngModel"
        required
        email
        placeholder="your.email@example.com"
      >
      
      <div class="error-message" *ngIf="email.invalid && email.touched">
        <span *ngIf="email.errors?.['required']">Email is required</span>
        <span *ngIf="email.errors?.['email']">Please enter a valid email address</span>
      </div>
    </div>

    <!-- Phone Field with Pattern -->
    <div class="form-group">
      <label for="phone">Phone Number *</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        [(ngModel)]="contact.phone"
        #phone="ngModel"
        required
        pattern="^\d{3}-\d{3}-\d{4}$"
        placeholder="123-456-7890"
      >
      
      <div class="error-message" *ngIf="phone.invalid && phone.touched">
        <span *ngIf="phone.errors?.['required']">Phone number is required</span>
        <span *ngIf="phone.errors?.['pattern']">
          Phone must be in format: XXX-XXX-XXXX (e.g., 123-456-7890)
        </span>
      </div>
    </div>

    <!-- Website Field (Optional) -->
    <div class="form-group">
      <label for="website">Website (Optional)</label>
      <input
        type="url"
        id="website"
        name="website"
        [(ngModel)]="contact.website"
        #website="ngModel"
        pattern="https?://.+"
        placeholder="https://www.example.com"
      >
      
      <div class="error-message" *ngIf="website.invalid && website.touched">
        <span *ngIf="website.errors?.['pattern']">
          URL must start with http:// or https:// (e.g., https://example.com)
        </span>
      </div>
    </div>

    <!-- Subject Dropdown -->
    <div class="form-group">
      <label for="subject">Subject *</label>
      <select
        id="subject"
        name="subject"
        [(ngModel)]="contact.subject"
        #subject="ngModel"
        required
      >
        <option value="">Select a subject</option>
        <option *ngFor="let subj of subjects" [value]="subj">{{ subj }}</option>
      </select>
      
      <div class="error-message" *ngIf="subject.invalid && subject.touched">
        <span *ngIf="subject.errors?.['required']">Please select a subject</span>
      </div>
    </div>

    <!-- Priority Radio Buttons -->
    <div class="form-group">
      <label>Priority *</label>
      <div class="radio-group">
        <label>
          <input
            type="radio"
            name="priority"
            value="low"
            [(ngModel)]="contact.priority"
            #priority="ngModel"
            required
          >
          Low - General inquiry
        </label>
        <label>
          <input
            type="radio"
            name="priority"
            value="normal"
            [(ngModel)]="contact.priority"
            required
          >
          Normal - Standard request
        </label>
        <label>
          <input
            type="radio"
            name="priority"
            value="high"
            [(ngModel)]="contact.priority"
            required
          >
          High - Urgent matter
        </label>
      </div>
    </div>

    <!-- Preferred Contact Method -->
    <div class="form-group">
      <label>Preferred Contact Method *</label>
      <div class="radio-group">
        <label>
          <input
            type="radio"
            name="contactMethod"
            value="email"
            [(ngModel)]="contact.contactMethod"
            #contactMethod="ngModel"
            required
          >
          Email
        </label>
        <label>
          <input
            type="radio"
            name="contactMethod"
            value="phone"
            [(ngModel)]="contact.contactMethod"
            required
          >
          Phone
        </label>
      </div>
      
      <div class="error-message" *ngIf="contactMethod.invalid && contactMethod.touched">
        <span *ngIf="contactMethod.errors?.['required']">
          Please select your preferred contact method
        </span>
      </div>
    </div>

    <!-- Message Textarea with Character Limit -->
    <div class="form-group">
      <label for="message">
        Message * 
        <span class="char-counter" [class.char-limit-warning]="getRemainingCharacters() < 50">
          ({{ getRemainingCharacters() }} characters remaining)
        </span>
      </label>
      <textarea
        id="message"
        name="message"
        [(ngModel)]="contact.message"
        #message="ngModel"
        required
        minlength="10"
        [maxlength]="maxMessageLength"
        rows="6"
        placeholder="Enter your message here..."
      ></textarea>
      
      <div class="error-message" *ngIf="message.invalid && message.touched">
        <span *ngIf="message.errors?.['required']">Message is required</span>
        <span *ngIf="message.errors?.['minlength']">
          Message must be at least 10 characters long
        </span>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="contactForm.invalid"
      >
        Send Message
      </button>
      <button 
        type="button" 
        class="btn btn-secondary"
        (click)="onReset(contactForm)"
      >
        Reset
      </button>
    </div>

    <!-- Form Debug Info (for learning purposes) -->
    <div class="info-box" style="margin-top: 20px;">
      <h3>üîç Form State (Debug Info):</h3>
      <ul>
        <li><strong>Form Valid:</strong> {{ contactForm.valid }}</li>
        <li><strong>Form Touched:</strong> {{ contactForm.touched }}</li>
        <li><strong>Form Dirty:</strong> {{ contactForm.dirty }}</li>
        <li><strong>Message Length:</strong> {{ contact.message?.length || 0 }} / {{ maxMessageLength }}</li>
      </ul>
    </div>

  </form>

  <!-- Additional Learning Tips -->
  <div class="info-box" style="margin-top: 20px; background: #f0f8ff; border-left-color: #2196f3;">
    <h3>üéØ Pattern Validation Tips:</h3>
    <ul>
      <li><strong>Phone:</strong> Try "123-456-7890" ‚úì vs "1234567890" ‚úó</li>
      <li><strong>Website:</strong> Try "https://example.com" ‚úì vs "example.com" ‚úó</li>
      <li><strong>Textarea:</strong> Watch the character counter as you type</li>
      <li><strong>Real-time Feedback:</strong> Notice validation happens on blur (when you leave a field)</li>
      <li><strong>Pattern Regex:</strong> Study the pattern attributes to understand regex validation</li>
    </ul>
  </div>
</div>

